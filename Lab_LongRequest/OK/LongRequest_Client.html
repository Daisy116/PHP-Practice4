<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
Test: <input type="text" id="txtTest" />
<hr>
<div id="debug"></div>

<script>
	var data = " \r\n";
	var xhr = new XMLHttpRequest();
	xhr.open("GET", "http://localhost/Lab_LongRequest/OK/LongRequest_Server.php", true);
	xhr.onprogress = function (e) {
		// document.getElementById("debug").innerHTML = xhr.responseText;
		responseText = xhr.responseText;
		lastEvent = responseText.replace(data, "");
		document.getElementById("debug").innerHTML = lastEvent;
		
		// 這兩行將上述的 JSON 字串轉成物件，然後只顯示出進度百分比
		// obj = JSON.parse(lastEvent);
		// document.getElementById("debug").innerHTML = obj.data + "%";
		
		data = responseText;
	}
	xhr.send(null);
</script>

</body>
</html>